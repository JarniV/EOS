/******************************************************************************
 * Created by Jarni Vanmal
 * helloworld.c: Using PL switch, PL led and PS led
 *
 *
 * This application configures UART 16550 to baud rate 9600.
 * PS7 UART (Zynq) is not initialized by this application, since
 * bootrom/bsp configures it to baud rate 115200
 *
 * ------------------------------------------------
 * | UART TYPE   BAUD RATE                        |
 * ------------------------------------------------
 *   uartns550   9600
 *   uartlite    Configurable only in HW design
 *   ps7_uart    115200 (configured by bootrom/bsp)
 ******************************************************************************
 */

#include <stdio.h>
#include "platform.h"
#include "xil_printf.h"
#include "sleep.h"

//Project 1
#include "xparameters.h"
#include "xgpiops.h"
#include "xgpio.h"
#include "xstatus.h"

/* Minized */
u32 Input_Pin = 0;    // Switch button
u32 Output_Pin = 52;  // LED 1
u32 Output_Pin2 = 53; // LED 2

XGpioPs GpioPS;
XGpio GpioPL;

#define LED_CHANNEL 1
#define LED 0x01

int main()
{
    init_platform();

    print("Project 1: Using PL switch, PL led and PS led\n\r");
    print("By Jarni Vanmal");

    //initialize
	XGpioPs_Config *GPIOConfigPtr;
	GPIOConfigPtr = XGpioPs_LookupConfig(XPAR_PS7_GPIO_0_DEVICE_ID);
	XGpioPs_CfgInitialize(&GpioPS, GPIOConfigPtr,GPIOConfigPtr->BaseAddr);

	//PL LED
	XGpio_Initialize(&GpioPL, XPAR_GPIO_0_DEVICE_ID);
	XGpio_SetDataDirection(&GpioPL, LED_CHANNEL, ~LED);

	//PS LED1
	XGpioPs_SetDirectionPin(&GpioPS, Output_Pin, 1);
	XGpioPs_SetOutputEnablePin(&GpioPS, Output_Pin, 1);
	//PS LED2
	XGpioPs_SetDirectionPin(&GpioPS, Output_Pin2, 1);
	XGpioPs_SetOutputEnablePin(&GpioPS, Output_Pin2, 1);
	//PS Button
	XGpioPs_SetDirectionPin(&GpioPS, Input_Pin, 0);

    for(;;)
    {



    	sleep_A9(1);
    }

    cleanup_platform();
    return 0;
}
